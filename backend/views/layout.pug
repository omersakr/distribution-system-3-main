doctype html
html(lang="ar" dir="rtl")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title || 'نظام التوزيع'
    link(href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet")
    script(src="https://cdn.tailwindcss.com")
    script.
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              cairo: ['Cairo', 'Arial', 'sans-serif']
            }
          }
        }
      }
    style.
      * { font-family: 'Cairo', Arial, sans-serif; }
    
  body.bg-gray-50.text-gray-900
    //- Hamburger menu for mobile
    button#sidebarHamburger.fixed.right-4.top-3.z-50.w-10.h-10.bg-blue-900.rounded-lg.flex.flex-col.items-center.justify-center.gap-1.shadow-md(aria-label="القائمة الجانبية" class="lg:hidden")
      span.block.w-6.h-1.bg-white.rounded
      span.block.w-6.h-1.bg-white.rounded
      span.block.w-6.h-1.bg-white.rounded
    
    //- Sidebar (hidden on small screens, visible on lg and up)
    nav#sidebar.fixed.top-0.w-56.h-screen.bg-blue-900.text-white.shadow-2xl.flex.flex-col.z-40.transition-all.duration-300(class="-right-60 lg:right-0")
      .app-title.text-2xl.font-bold.text-center.my-6.tracking-wide نظام التوزيع
      
      ul.flex-1.list-none.p-0.m-0
        li
          a.block.text-gray-100.no-underline.text-lg.py-4.px-7.border-r-4.border-transparent.transition-all.duration-150(
            href="/"
            class=`${activePage === 'dashboard' ? 'bg-blue-800 border-blue-400' : 'hover:bg-blue-800 hover:text-white'}`
          ) لوحة التحكم
        li
          a.block.text-gray-100.no-underline.text-lg.py-4.px-7.border-r-4.border-transparent.transition-all.duration-150(
            href="/clients"
            class=`${activePage === 'clients' ? 'bg-blue-800 border-blue-400' : 'hover:bg-blue-800 hover:text-white'}`
          ) العملاء
        li
          a.block.text-gray-100.no-underline.text-lg.py-4.px-7.border-r-4.border-transparent.transition-all.duration-150(
            href="/crushers"
            class=`${activePage === 'crushers' ? 'bg-blue-800 border-blue-400' : 'hover:bg-blue-800 hover:text-white'}`
          ) الكسارات
        li
          a.block.text-gray-100.no-underline.text-lg.py-4.px-7.border-r-4.border-transparent.transition-all.duration-150(
            href="/contractors"
            class=`${activePage === 'contractors' ? 'bg-blue-800 border-blue-400' : 'hover:bg-blue-800 hover:text-white'}`
          ) مقاولين العجل
        li
          a.block.text-gray-100.no-underline.text-lg.py-4.px-7.border-r-4.border-transparent.transition-all.duration-150(
            href="/deliveries/new"
            class=`${activePage === 'new-delivery' ? 'bg-blue-800 border-blue-400' : 'hover:bg-blue-800 hover:text-white'}`
          ) تسليم جديد
      
      .flex-1
    
    //- Main Content
    main(class="p-8 transition-all duration-300 lg:mr-56 mr-0 lg:p-8 p-4")
      //- Flash messages
      if messages && messages.success
        .bg-green-100.border.border-green-400.text-green-700.px-4.py-3.rounded.mb-4(role="alert")
          p.font-bold نجاح
          p= messages.success
      
      if messages && messages.error
        .bg-red-100.border.border-red-400.text-red-700.px-4.py-3.rounded.mb-4(role="alert")
          p.font-bold خطأ
          p= messages.error
      
      block content
    
    script.
      const sidebar = document.getElementById('sidebar');
      const hamburger = document.getElementById('sidebarHamburger');
      
      hamburger.addEventListener('click', function() {
        sidebar.classList.toggle('-right-60');
        sidebar.classList.toggle('right-0');
      });
      
      document.body.addEventListener('click', function(e) {
        if (window.innerWidth < 1024 && !sidebar.classList.contains('-right-60')) {
          if (!sidebar.contains(e.target) && e.target !== hamburger && !hamburger.contains(e.target)) {
            sidebar.classList.add('-right-60');
            sidebar.classList.remove('right-0');
          }
        }
      });
      
      window.addEventListener('resize', function() {
        if (window.innerWidth >= 1024) {
          sidebar.classList.remove('-right-60');
          sidebar.classList.add('right-0');
        }
      });
    
    block scripts